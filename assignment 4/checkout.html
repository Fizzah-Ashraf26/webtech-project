<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Checkout - Flower</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="checkout.css" />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <header class="header text-center py-3">
      <h1>
        <a href="#">fl<i class="fa-solid fa-fan"></i>wer<sup>be</sup></a>
      </h1>
    </header>

    <div class="container mt-3 border p-4">
      <div class="checkout-steps text-center mb-4">
        <span class="step completed">Cart</span> →
        <span class="step completed">Address</span> →
        <span class="step active">Payment</span> →
        <span class="step">Review</span>
      </div>

      <div class="row g-4">
        <div class="col-12 col-md-7">
          <form id="checkoutForm" novalidate>
            <h2 class="mb-3">Shipping Address</h2>

            <div class="row g-3">
              <div class="col-md-6">
                <input
                  type="text"
                  class="form-control"
                  id="fullName"
                  placeholder="Full Name *"
                />
                <div class="invalid-feedback">
                  Please enter at least 3 characters.
                </div>
              </div>

              <div class="col-md-6">
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  placeholder="Email *"
                />
                <div class="invalid-feedback">Enter a valid email.</div>
              </div>

              <div class="col-md-6">
                <input
                  type="tel"
                  class="form-control"
                  id="phone"
                  placeholder="Phone *"
                />
                <div class="invalid-feedback">Enter at least 10 digits.</div>
              </div>

              <div class="col-12">
                <input
                  type="text"
                  class="form-control"
                  id="address"
                  placeholder="Address *"
                />
                <div class="invalid-feedback">Address is required.</div>
              </div>

              <div class="col-md-6">
                <input
                  type="text"
                  class="form-control"
                  id="city"
                  placeholder="City *"
                />
                <div class="invalid-feedback">City is required.</div>
              </div>

              <div class="col-md-3">
                <input
                  type="text"
                  class="form-control"
                  id="postal"
                  placeholder="Postal Code *"
                />
                <div class="invalid-feedback">
                  Postal code must be 4–6 digits.
                </div>
              </div>

              <div class="col-md-3">
                <select class="form-select" id="country">
                  <option value="">Country *</option>
                  <option>Pakistan</option>
                  <option>USA</option>
                  <option>UK</option>
                </select>
                <div class="invalid-feedback">Select your country.</div>
              </div>
            </div>

            <div class="form-check my-3">
              <input
                class="form-check-input"
                type="checkbox"
                id="sameAddress"
              />
              <label class="form-check-label" for="sameAddress">
                Billing same as shipping
              </label>
            </div>

            <h3 class="mt-4">Payment Method</h3>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="payment"
                id="card"
                value="card"
              />
              <label class="form-check-label" for="card">
                Credit/Debit Card
              </label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="payment"
                id="cod"
                value="cod"
              />
              <label class="form-check-label" for="cod">Cash on Delivery</label>
            </div>
            <div class="form-check mb-3">
              <input
                class="form-check-input"
                type="radio"
                name="payment"
                id="wallet"
                value="wallet"
              />
              <label class="form-check-label" for="wallet">Wallet</label>
            </div>

            <div id="cardDetails" class="mt-3" style="display: none">
              <div class="row g-3">
                <div class="col-md-6">
                  <input
                    type="text"
                    class="form-control"
                    id="cardName"
                    placeholder="Cardholder Name"
                  />
                  <div class="invalid-feedback">Required for card payment.</div>
                </div>
                <div class="col-md-6">
                  <input
                    type="text"
                    class="form-control"
                    id="cardNumber"
                    placeholder="XXXX-XXXX-XXXX-XXXX"
                  />
                  <div class="invalid-feedback">Enter a valid card number.</div>
                </div>
                <div class="col-md-4">
                  <input
                    type="text"
                    class="form-control"
                    id="expiry"
                    placeholder="MM/YY"
                  />
                  <div class="invalid-feedback">Enter expiry date.</div>
                </div>
                <div class="col-md-4">
                  <input
                    type="text"
                    class="form-control"
                    id="cvv"
                    placeholder="CVV"
                  />
                  <div class="invalid-feedback">Enter CVV.</div>
                </div>
              </div>
            </div>

            <div class="form-check mt-4">
              <input class="form-check-input" type="checkbox" id="terms" />
              <label class="form-check-label" for="terms">
                I agree to the terms and conditions.
              </label>
              <div class="invalid-feedback">
                You must agree before placing order.
              </div>
            </div>

            <button type="submit" class="btn btn-primary mt-3 w-100">
              Place Order
            </button>
          </form>
        </div>

        <div class="col-12 col-md-5">
          <div class="position-sticky top-0">
            <h3>Order Summary</h3>
            <div class="border p-3 mb-3" style="background-color: #faf8f6">
              <div class="d-flex justify-content-between mb-2">
                <span>Primroses Bouquet</span>
                <span>Rs.1500</span>
              </div>
              <div class="d-flex justify-content-between mb-2">
                <span>Shipping</span>
                <span>Rs.200</span>
              </div>
              <div class="d-flex justify-content-between mb-2">
                <span>Tax</span>
                <span>Rs.50</span>
              </div>
              <div class="d-flex justify-content-between fw-bold mb-2">
                <span>Total</span>
                <span>Rs.1750</span>
              </div>

              <div class="input-group mt-3">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Promo Code"
                />
                <button class="btn btn-outline-secondary" type="button">
                  Apply
                </button>
              </div>
            </div>
            <div
              class="border p-3 text-center"
              style="background-color: #faf8f6"
            >
              Don't love your bouquet? We'll give you a full refund.
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="text-center p-3 mt-5" style="background-color: #f2eee7">
      <p>&copy; 2025 Flower. All Rights Reserved.</p>
    </footer>

    <script>
      $(document).ready(function () {
        $("input[name='payment']").change(function () {
          if ($("#card").is(":checked")) {
            $("#cardDetails").slideDown();
          } else {
            $("#cardDetails").slideUp();
          }
        });

        $("#checkoutForm").on("submit", function (e) {
          e.preventDefault();
          let valid = true;

          $(".form-control, .form-select, .form-check-input").removeClass(
            "is-invalid is-valid"
          );

          function invalidate(id) {
            $(id).addClass("is-invalid");
            valid = false;
          }

          if ($("#fullName").val().trim().length < 3) invalidate("#fullName");
          else $("#fullName").addClass("is-valid");

          const emailPattern = /^[^@\s]+@[^@\s]+\.[^@\s]+$/;
          if (!emailPattern.test($("#email").val().trim()))
            invalidate("#email");
          else $("#email").addClass("is-valid");

          const phonePattern = /^\d{10,}$/;
          if (!phonePattern.test($("#phone").val().trim()))
            invalidate("#phone");
          else $("#phone").addClass("is-valid");

          if ($("#address").val().trim() === "") invalidate("#address");
          else $("#address").addClass("is-valid");

          if ($("#city").val().trim() === "") invalidate("#city");
          else $("#city").addClass("is-valid");

          const postalPattern = /^\d{4,6}$/;
          if (!postalPattern.test($("#postal").val().trim()))
            invalidate("#postal");
          else $("#postal").addClass("is-valid");

          if ($("#country").val() === "") invalidate("#country");
          else $("#country").addClass("is-valid");

          if ($("input[name='payment']:checked").length === 0) {
            valid = false;
          }

          if ($("#card").is(":checked")) {
            if ($("#cardName").val().trim() === "") invalidate("#cardName");
            else $("#cardName").addClass("is-valid");

            if ($("#cardNumber").val().trim().length < 12)
              invalidate("#cardNumber");
            else $("#cardNumber").addClass("is-valid");

            if ($("#expiry").val().trim() === "") invalidate("#expiry");
            else $("#expiry").addClass("is-valid");

            if ($("#cvv").val().trim().length < 3) invalidate("#cvv");
            else $("#cvv").addClass("is-valid");
          }

          if (!$("#terms").is(":checked")) {
            $("#terms").addClass("is-invalid");
            valid = false;
          } else {
            $("#terms").addClass("is-valid");
          }
          if (!valid) {
            $("html, body").animate({
              scrollTop: $(".is-invalid:first").offset().top - 100,
            });
            return;
          }
          window.location.href = "orderplaced.html";
        });
      });
    </script>
  </body>
</html>
